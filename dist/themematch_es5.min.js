// Package: themematch v1.0.4 (built 2017-10-25 16:17:14)
// Copyright: (C) 2017 Michael Wright <mjw@methodanalysis.com>
// License: MIT

"use strict";var parseCSSColor=parseCSSColor;!function(){function e(e){if(void 0===e.name)throw new Error("theme must have name");if(void 0===e.backgrounds||e.backgrounds.constructor!==Array||0===e.backgrounds.length)throw new Error("theme must have backgrounds");if(void 0===e.foregrounds||e.foregrounds.constructor!==Array||0===e.foregrounds.length)throw new Error("theme must have foregrounds");return e}function t(e){for(var t=[0,0,0],r=0,o=0;o<e.length;o++){var s=parseCSSColor(e[o]),n=e.length-o;t[0]+=s[0]*s[3]*n,t[1]+=s[1]*s[3]*n,t[2]+=s[2]*s[3]*n,r+=n}return t[0]/=r,t[1]/=r,t[2]/=r,t}function r(e,t){return(Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])+Math.abs(e[2]-t[2]))/765}if("undefined"!=typeof module&&void 0!==module.exports){var o=require("csscolorparser");parseCSSColor=o.parseCSSColor}var s=function(){var o=function(e){if(void 0===e&&(e={}),this.sub_name=e.name,this.themes={},this.subs={},void 0!==e.themes)for(var t=0;t<e.themes.length;t++)this.add_theme(e.themes[t]);if(void 0!==e.subs)for(var r=0;r<e.subs.length;r++)this.add_sub(e.subs[r])};return o.prototype.name=function(){return this.sub_name},o.prototype.get_themes=function(e){if(void 0!==e)return this.themes[e];for(var t=[],r=Object.keys(this.themes),o=0;o<r.length;o++)t.push(this.themes[r[o]]);return t},o.prototype.get_subs=function(e){if(void 0!==e)return this.subs[e];for(var t=[],r=Object.keys(this.subs),o=0;o<r.length;o++)t.push(this.subs[r[o]]);return t},o.prototype.add_theme=function(t){e(t),this.themes[t.name]=t},o.prototype.add_sub=function(e){if(void 0===e.name)throw new Error("sub must have a name");var t=new o(e);return this.subs[e.name]=t,t},o.prototype.select=function(e){var t=this.themes[e];if(void 0===t)throw new Error('theme "'+e+'" not registered/known');for(var r=[t],o=this.get_subs(),s=0;s<o.length;s++)for(var n=o[s].match(t),u=0;u<n.length;u++)r.push(n[u]);return r},o.prototype.match=function(e){for(var o=t(e.backgrounds),s=t(e.foregrounds),n=[],u=this.get_themes(),h=0;h<u.length;h++){var a=u[h],i=t(a.backgrounds),m=t(a.foregrounds),d=r(o,i),f=r(s,m);n.push({theme:a,score:d+f})}return n.sort(function(e,t){return e.score-t.score}),this.select(n[0].theme.name)},o.prototype.assert_theme_valid=e,o.prototype.colset_to_rgb=t,o.prototype.col_cmp=r,o}();"undefined"!=typeof module&&void 0!==module.exports?module.exports=s:window.themematch=s}();